# Settings.json æœ¬åœ°æ–‡ä»¶å¤‡ä»½ - æ›´æ–°è¯´æ˜

## ğŸ“‹ æ›´æ–°æ—¶é—´
2025-10-14

## ğŸ¯ æ”¹è¿›è¯´æ˜

### åŸé—®é¢˜
- å¤‡ä»½å­˜å‚¨åœ¨**å†…å­˜å˜é‡**ä¸­ (`let settingsBackup = null`)
- ç¨‹åºå…³é—­åå¤‡ä»½ä¸¢å¤±
- ä¸å®‰å…¨ã€ä¸å¯é 

### æ–°æ–¹æ¡ˆ
- å¤‡ä»½å­˜å‚¨åœ¨**æœ¬åœ°æ–‡ä»¶**ä¸­
- æŒä¹…åŒ–ä¿å­˜ï¼Œç¨‹åºé‡å¯ä¸ä¸¢å¤±
- æ›´å®‰å…¨ã€æ›´å¯é 

---

## ğŸ“ å¤‡ä»½æ–‡ä»¶ä½ç½®

### å¤‡ä»½è·¯å¾„
```javascript
åº”ç”¨æ•°æ®ç›®å½• + '/cursor_settings_backup.json'
```

### Windowsç³»ç»Ÿç¤ºä¾‹
```
C:\Users\{ç”¨æˆ·å}\AppData\Roaming\cursor-renewal-client\cursor_settings_backup.json
```

### macOSç³»ç»Ÿç¤ºä¾‹
```
~/Library/Application Support/cursor-renewal-client/cursor_settings_backup.json
```

### Linuxç³»ç»Ÿç¤ºä¾‹
```
~/.config/cursor-renewal-client/cursor_settings_backup.json
```

---

## ğŸ”„ å·¥ä½œæµç¨‹

### 1. å¤‡ä»½æµç¨‹ï¼ˆå¼€å¯åœ°åŒºé™åˆ¶å‰ï¼‰
```
æ£€æµ‹åˆ°åŸå§‹é…ç½®ï¼ˆæ— ä»£ç†æˆ–ä»£ç†ä¸åœ¨æ•°æ®åº“ä¸­ï¼‰
  â†“
æ£€æŸ¥æ˜¯å¦å·²æœ‰æœ¬åœ°å¤‡ä»½æ–‡ä»¶
  â†“
æ²¡æœ‰å¤‡ä»½ â†’ åˆ›å»ºå¤‡ä»½
  â†“
è¯»å– settings.json å†…å®¹
  â†“
å†™å…¥åˆ°æœ¬åœ°å¤‡ä»½æ–‡ä»¶
  â†“
âœ“ å¤‡ä»½å®Œæˆï¼ˆæŒä¹…åŒ–ä¿å­˜ï¼‰
```

### 2. æ¢å¤æµç¨‹ï¼ˆå…³é—­åœ°åŒºé™åˆ¶æ—¶ï¼‰
```
ç”¨æˆ·ç‚¹å‡»"å…³é—­åœ°åŒºé™åˆ¶"
  â†“
æ£€æŸ¥æ˜¯å¦å­˜åœ¨æœ¬åœ°å¤‡ä»½æ–‡ä»¶
  â†“
æœ‰å¤‡ä»½ â†’ è¯»å–å¤‡ä»½æ–‡ä»¶å†…å®¹
  â†“
å†™å…¥åˆ° settings.json
  â†“
âœ“ æ¢å¤å®Œæˆï¼ˆé…ç½®è¿˜åŸï¼‰
```

---

## ğŸ’» æŠ€æœ¯å®ç°

### æ–°å¢å‡½æ•°

#### 1. è·å–å¤‡ä»½æ–‡ä»¶è·¯å¾„
```javascript
function getBackupFilePath() {
  const userDataPath = app.getPath('userData');
  return path.join(userDataPath, 'cursor_settings_backup.json');
}
```

#### 2. å¤‡ä»½åˆ°æœ¬åœ°æ–‡ä»¶
```javascript
function backupCursorSettings(settingsPath) {
  // è¯»å–åŸå§‹å†…å®¹
  const content = fs.readFileSync(settingsPath, 'utf8');
  
  // è·å–å¤‡ä»½æ–‡ä»¶è·¯å¾„
  const backupPath = getBackupFilePath();
  
  // å†™å…¥æœ¬åœ°å¤‡ä»½æ–‡ä»¶
  fs.writeFileSync(backupPath, content, 'utf8');
  
  return true;
}
```

#### 3. ä»æœ¬åœ°æ–‡ä»¶æ¢å¤
```javascript
function restoreCursorSettings(settingsPath) {
  const backupPath = getBackupFilePath();
  
  // æ£€æŸ¥å¤‡ä»½æ–‡ä»¶æ˜¯å¦å­˜åœ¨
  if (!fs.existsSync(backupPath)) {
    return false;
  }
  
  // è¯»å–å¤‡ä»½å†…å®¹
  const backupContent = fs.readFileSync(backupPath, 'utf8');
  
  // æ¢å¤åˆ°åŸå§‹ä½ç½®
  fs.writeFileSync(settingsPath, backupContent, 'utf8');
  
  return true;
}
```

#### 4. æ£€æŸ¥å¤‡ä»½æ˜¯å¦å­˜åœ¨
```javascript
function hasLocalBackup() {
  const backupPath = getBackupFilePath();
  return fs.existsSync(backupPath);
}
```

---

## ğŸ“Š å¯¹æ¯”åˆ†æ

### åŸå®ç°ï¼ˆå†…å­˜å¤‡ä»½ï¼‰
| ç‰¹æ€§ | è¯´æ˜ |
|------|------|
| å­˜å‚¨æ–¹å¼ | å†…å­˜å˜é‡ `let settingsBackup = null` |
| æŒä¹…æ€§ | âŒ ç¨‹åºå…³é—­å³ä¸¢å¤± |
| å®‰å…¨æ€§ | âŒ å†…å­˜å¯èƒ½è¢«æ¸…ç©º |
| å¯æ¢å¤æ€§ | âŒ ç¨‹åºé‡å¯åæ— æ³•æ¢å¤ |
| æŸ¥çœ‹å¤‡ä»½ | âŒ æ— æ³•æŸ¥çœ‹å¤‡ä»½å†…å®¹ |

### æ–°å®ç°ï¼ˆæ–‡ä»¶å¤‡ä»½ï¼‰
| ç‰¹æ€§ | è¯´æ˜ |
|------|------|
| å­˜å‚¨æ–¹å¼ | æœ¬åœ°æ–‡ä»¶ `cursor_settings_backup.json` |
| æŒä¹…æ€§ | âœ… æŒä¹…åŒ–ä¿å­˜ |
| å®‰å…¨æ€§ | âœ… æ–‡ä»¶ç³»ç»Ÿä¿æŠ¤ |
| å¯æ¢å¤æ€§ | âœ… ç¨‹åºé‡å¯åä»å¯æ¢å¤ |
| æŸ¥çœ‹å¤‡ä»½ | âœ… å¯æ‰‹åŠ¨æŸ¥çœ‹å’Œç¼–è¾‘ |

---

## ğŸ”§ ä¿®æ”¹çš„ä»£ç 

### æ–‡ä»¶ä½ç½®
`electron/cursor-renewal-client/main.js`

### ä¸»è¦ä¿®æ”¹

#### 1. ç§»é™¤å†…å­˜å˜é‡ï¼ˆç¬¬4072-4073è¡Œï¼‰
```javascript
// âŒ åˆ é™¤
let settingsBackup = null;

// âœ… æ–°å¢
function getBackupFilePath() { ... }
```

#### 2. å¤‡ä»½å‡½æ•°é‡å†™ï¼ˆç¬¬4078-4112è¡Œï¼‰
```javascript
// ä»å†…å­˜å˜é‡ â†’ æœ¬åœ°æ–‡ä»¶
settingsBackup = content;  // âŒ
fs.writeFileSync(backupPath, content, 'utf8');  // âœ…
```

#### 3. æ¢å¤å‡½æ•°é‡å†™ï¼ˆç¬¬4114-4146è¡Œï¼‰
```javascript
// ä»å†…å­˜å˜é‡è¯»å– â†’ ä»æœ¬åœ°æ–‡ä»¶è¯»å–
if (!settingsBackup) { ... }  // âŒ
if (!fs.existsSync(backupPath)) { ... }  // âœ…

fs.writeFileSync(settingsPath, settingsBackup, 'utf8');  // âŒ
const backupContent = fs.readFileSync(backupPath, 'utf8');  // âœ…
fs.writeFileSync(settingsPath, backupContent, 'utf8');
```

#### 4. æ£€æŸ¥å‡½æ•°æ–°å¢ï¼ˆç¬¬4148-4152è¡Œï¼‰
```javascript
function hasLocalBackup() {
  const backupPath = getBackupFilePath();
  return fs.existsSync(backupPath);
}
```

#### 5. æ‰€æœ‰æ£€æŸ¥å¤‡ä»½çš„åœ°æ–¹æ›´æ–°
```javascript
// âŒ æ—§ä»£ç 
if (!settingsBackup) { ... }

// âœ… æ–°ä»£ç 
if (!hasLocalBackup()) { ... }
```

æ¶‰åŠè¡Œæ•°ï¼š
- ç¬¬ 4284 è¡Œ
- ç¬¬ 4325 è¡Œ
- ç¬¬ 4355 è¡Œ
- ç¬¬ 4382 è¡Œ
- ç¬¬ 4480 è¡Œ

---

## ğŸ“ æ—¥å¿—è¾“å‡ºæ›´æ–°

### å¤‡ä»½æ—¶
```
ä¹‹å‰ï¼š
âœ“ å·²å¤‡ä»½settings.json: C:\Users\...\settings.json
âœ“ å¤‡ä»½å†…å®¹é•¿åº¦: 491 å­—ç¬¦

ç°åœ¨ï¼š
âœ“ å·²å¤‡ä»½settings.jsonåˆ°æœ¬åœ°: C:\Users\...\AppData\Roaming\cursor-renewal-client\cursor_settings_backup.json
âœ“ åŸå§‹æ–‡ä»¶: C:\Users\Administrator\AppData\Roaming\Cursor\User\settings.json
âœ“ å¤‡ä»½å†…å®¹é•¿åº¦: 491 å­—ç¬¦
```

### æ¢å¤æ—¶
```
ä¹‹å‰ï¼š
âœ“ å·²ä»å¤‡ä»½æ¢å¤settings.json: C:\Users\...\settings.json
âœ“ æ¢å¤å†…å®¹é•¿åº¦: 491 å­—ç¬¦

ç°åœ¨ï¼š
âœ“ å·²ä»æœ¬åœ°å¤‡ä»½æ¢å¤settings.json
âœ“ å¤‡ä»½æ–‡ä»¶: C:\Users\...\AppData\Roaming\cursor-renewal-client\cursor_settings_backup.json
âœ“ æ¢å¤åˆ°: C:\Users\Administrator\AppData\Roaming\Cursor\User\settings.json
âœ“ æ¢å¤å†…å®¹é•¿åº¦: 491 å­—ç¬¦
```

### æ£€æŸ¥å¤‡ä»½æ—¶
```
ä¹‹å‰ï¼š
å·²å­˜åœ¨å¤‡ä»½ï¼Œè·³è¿‡é‡å¤å¤‡ä»½

ç°åœ¨ï¼š
å·²å­˜åœ¨æœ¬åœ°å¤‡ä»½ï¼Œè·³è¿‡é‡å¤å¤‡ä»½
```

---

## âœ… ä¼˜åŠ¿æ€»ç»“

### 1. **æŒä¹…æ€§** ğŸ”’
- ç¨‹åºå…³é—­åå¤‡ä»½ä¸ä¸¢å¤±
- é‡å¯åå¯ä»¥ç»§ç»­ä½¿ç”¨å¤‡ä»½

### 2. **å¯é æ€§** ğŸ’¯
- æ–‡ä»¶ç³»ç»Ÿä¿æŠ¤ï¼Œæ›´å®‰å…¨
- ä¸ä¼šå› å†…å­˜é—®é¢˜ä¸¢å¤±

### 3. **å¯ç»´æŠ¤æ€§** ğŸ› ï¸
- å¯ä»¥æ‰‹åŠ¨æŸ¥çœ‹å¤‡ä»½æ–‡ä»¶
- å‡ºé—®é¢˜æ—¶å¯ä»¥æ‰‹åŠ¨æ¢å¤

### 4. **å…¼å®¹æ€§** ğŸŒ
- è·¨å¹³å°æ”¯æŒï¼ˆWindows/macOS/Linuxï¼‰
- è‡ªåŠ¨ä½¿ç”¨ç³»ç»Ÿæ ‡å‡†ç›®å½•

### 5. **è°ƒè¯•å‹å¥½** ğŸ›
- å¯ä»¥ç›´æ¥æ‰“å¼€å¤‡ä»½æ–‡ä»¶æŸ¥çœ‹å†…å®¹
- æ–¹ä¾¿æ’æŸ¥é—®é¢˜

---

## ğŸ§ª æµ‹è¯•åœºæ™¯

### æµ‹è¯•1: æ­£å¸¸å¤‡ä»½æ¢å¤
1. æ— ä»£ç†çŠ¶æ€å¯åŠ¨ç¨‹åº â†’ è‡ªåŠ¨å¤‡ä»½åˆ°æœ¬åœ°
2. å¼€å¯åœ°åŒºé™åˆ¶ â†’ å†™å…¥ä»£ç†é…ç½®
3. å…³é—­åœ°åŒºé™åˆ¶ â†’ ä»æœ¬åœ°å¤‡ä»½æ¢å¤
4. **éªŒè¯**: é…ç½®å®Œå…¨æ¢å¤ âœ“

### æµ‹è¯•2: ç¨‹åºé‡å¯åæ¢å¤
1. æ— ä»£ç†çŠ¶æ€å¯åŠ¨ç¨‹åº â†’ åˆ›å»ºæœ¬åœ°å¤‡ä»½
2. å…³é—­ç¨‹åº
3. é‡æ–°å¯åŠ¨ç¨‹åº
4. å¼€å¯åœ°åŒºé™åˆ¶ â†’ å†™å…¥ä»£ç†é…ç½®
5. å…³é—­åœ°åŒºé™åˆ¶ â†’ ä»å¯ä»æœ¬åœ°å¤‡ä»½æ¢å¤
6. **éªŒè¯**: å¤‡ä»½æ–‡ä»¶æŒä¹…åŒ–æœ‰æ•ˆ âœ“

### æµ‹è¯•3: æ‰‹åŠ¨æŸ¥çœ‹å¤‡ä»½
1. åˆ›å»ºå¤‡ä»½å
2. æ‰“å¼€æ–‡ä»¶èµ„æºç®¡ç†å™¨
3. è®¿é—® `AppData\Roaming\cursor-renewal-client\`
4. æ‰“å¼€ `cursor_settings_backup.json`
5. **éªŒè¯**: å¯ä»¥çœ‹åˆ°JSONæ ¼å¼çš„å¤‡ä»½å†…å®¹ âœ“

### æµ‹è¯•4: å¤‡ä»½æ–‡ä»¶ä¸¢å¤±
1. åˆ›å»ºå¤‡ä»½å
2. æ‰‹åŠ¨åˆ é™¤å¤‡ä»½æ–‡ä»¶
3. å…³é—­åœ°åŒºé™åˆ¶
4. **é¢„æœŸ**: ä½¿ç”¨åŸºç¡€é…ç½®å…œåº• âœ“

---

## âš ï¸ æ³¨æ„äº‹é¡¹

1. **å¤‡ä»½æ–‡ä»¶ä½ç½®**
   - å­˜å‚¨åœ¨åº”ç”¨æ•°æ®ç›®å½•ï¼Œç”¨æˆ·ä¸€èˆ¬ä¸ä¼šè¯¯åˆ 
   - å¸è½½ç¨‹åºæ—¶å¯èƒ½è¢«åˆ é™¤ï¼ˆå–å†³äºå¸è½½ç¨‹åºè¡Œä¸ºï¼‰

2. **æƒé™é—®é¢˜**
   - éœ€è¦æœ‰åº”ç”¨æ•°æ®ç›®å½•çš„è¯»å†™æƒé™
   - ä¸€èˆ¬æƒ…å†µä¸‹éƒ½æœ‰æƒé™

3. **ç£ç›˜ç©ºé—´**
   - å¤‡ä»½æ–‡ä»¶å¾ˆå°ï¼ˆé€šå¸¸<1KBï¼‰
   - å¯¹ç£ç›˜ç©ºé—´å½±å“å¯ä»¥å¿½ç•¥

4. **æ›´æ–°è¦†ç›–**
   - æ¯æ¬¡æ£€æµ‹åˆ°åŸå§‹é…ç½®éƒ½ä¼šè¦†ç›–å¤‡ä»½
   - ä¿è¯å¤‡ä»½æ˜¯æœ€æ–°çš„åŸå§‹é…ç½®

---

## ğŸš€ æœªæ¥ä¼˜åŒ–å»ºè®®

1. **å¤šç‰ˆæœ¬å¤‡ä»½** - ä¿å­˜å¤šä¸ªå¤‡ä»½ç‰ˆæœ¬ï¼Œå¯ä»¥å›é€€
2. **å¤‡ä»½åŠ å¯†** - å¯¹å¤‡ä»½æ–‡ä»¶è¿›è¡ŒåŠ å¯†ä¿æŠ¤
3. **äº‘ç«¯åŒæ­¥** - å¯é€‰çš„äº‘ç«¯å¤‡ä»½åŠŸèƒ½
4. **è‡ªåŠ¨æ¸…ç†** - å®šæœŸæ¸…ç†è¿‡æœŸçš„å¤‡ä»½æ–‡ä»¶
5. **å¤‡ä»½ç®¡ç†ç•Œé¢** - åœ¨UIä¸­æ˜¾ç¤ºå¤‡ä»½ä¿¡æ¯å’Œç®¡ç†åŠŸèƒ½

---

**æ›´æ–°å®Œæˆæ—¶é—´**: 2025-10-14  
**çŠ¶æ€**: âœ… å·²å®Œæˆå¹¶æµ‹è¯•  
**ç‰ˆæœ¬**: v2.0ï¼ˆæœ¬åœ°æ–‡ä»¶å¤‡ä»½ç‰ˆæœ¬ï¼‰

